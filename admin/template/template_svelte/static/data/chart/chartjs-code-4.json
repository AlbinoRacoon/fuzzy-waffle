<script>
  import ChartJs from '/src/components/plugins/ChartJs.svelte';
  import { onMount } from 'svelte';
  import { appVariables } from '/src/stores/appVariables.js';
  
  let chartData = [];
  
  function getChartData(appVariables) {
    return {
      type: 'polarArea',
      data: {
        datasets: [{
          data: [11, 16, 7, 3, 14],
          backgroundColor: ['rgba('+ appVariables.color.primaryRgb +', .5)', 'rgba('+ appVariables.color.darkRgb +', .2)' +', .5)', 'rgba('+ appVariables.color.gray300Rgb +', .5)', 'rgba('+ appVariables.color.gray500Rgb +', .5)', 'rgba('+ appVariables.color.gray800Rgb +', .5)'],
          borderWidth: 0
        }],
        labels: ['IE', 'Safari', 'Chrome', 'Firefox', 'Opera']
      }
    };
  }
  
  onMount(async () => {
    appVariables.subscribe(value => {
      if (value.color) {
        chartData = getChartData(value);
      }
    });
  });
</script>


{#if chartData}
  <ChartJs type={chartData.type} data={chartData.data}></ChartJs>
{/if}