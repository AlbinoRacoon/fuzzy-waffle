<script>
  import ChartJs from '/src/components/plugins/ChartJs.svelte';
  import { onMount } from 'svelte';
  import { appVariables } from '/src/stores/appVariables.js';
  
  let chartData = [];
  
  function getChartData(appVariables) {
    return {
      type: 'radar',
      data: {
        labels: ['United States', 'Canada', 'Australia', 'Netherlands', 'Germany', 'New Zealand', 'Singapore'],
        datasets: [
          {
            label: 'Mobile',
            backgroundColor: 'rgba('+ appVariables.color.primaryRgb +', .2)',
            borderColor: appVariables.color.primary,
            pointBackgroundColor: appVariables.color.primary,
            pointBorderColor: appVariables.color.primary,
            pointHoverBackgroundColor: appVariables.color.primary,
            pointHoverBorderColor: appVariables.color.primary,
            data: [65, 59, 90, 81, 56, 55, 40],
            borderWidth: 1.5
          },
          {
            label: 'Desktop',
            backgroundColor: 'rgba('+ appVariables.color.gray500Rgb +', .2)',
            borderColor: appVariables.color.gray500,
            pointBackgroundColor: appVariables.color.gray500,
            pointBorderColor: appVariables.color.gray500,
            pointHoverBackgroundColor: appVariables.color.gray500,
            pointHoverBorderColor: appVariables.color.gray500,
            data: [28, 48, 40, 19, 96, 27, 100],
            borderWidth: 1.5
          }
        ]
      }
    };
  }
  
  onMount(async () => {
    appVariables.subscribe(value => {
      if (value.color) {
        chartData = getChartData(value);
      }
    });
  });
</script>


{#if chartData}
  <ChartJs type={chartData.type} data={chartData.data}></ChartJs>
{/if}